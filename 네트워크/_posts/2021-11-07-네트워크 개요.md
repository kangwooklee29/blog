### 1. 네트워크 구조

\- 네트워크는 사용자가 사용하는 컴퓨터 단말기 사이를 여러 장치와 시스템을 통해 서로 연결한 것으로, 이의 구성요소는 크게 network edge(사용자의 웹 브라우저)와 network core(라우터)로 구분할 수 있다. 

\- 네트워크 구조는 여러 계층이 결합해 구현되며 네트워크를 구현하는 계층의 표준으로 OSI 7계층이 있다. 각 계층은 크게 application 계층 - transport 계층 - network 계층 - link 계층 - physical 계층으로 나눌 수 있다. 네트워크 통신은 결국 네트워크 망의 양쪽 끝인 network edge의 application 계층 간의 정보 전달이라 볼 수 있으며, 나머지 하위 계층은 각자 그보다 상위 계층의 통신을 보조하는 역할을 맡는 거라고 볼 수 있다. 

\- 라우터는 라우터로 들어온 패킷의 오류 등을 검사하고 다음 라우터로 데이터를 송신하는 역할을 하며, 그 외의 기능은 거의 없다. 따라서 라우터에는 이를 구현하기 위한 OSI 계층도 **network 계층, link 계층, physical 계층만이 존재**한다. (그래서 라우터를 흔히 **dumb core**라 부른다. 예를 들어, 라우터로 들어온 패킷이 너무 많아져서 라우터의 buffer를 초과하게 되었을 경우 라우터로 계속 패킷이 들어오더라도 이들 패킷을 저장할 방법이 없으므로 이때 들어오는 패킷들은 모두 정보가 손실이 된다. 손실된 패킷을 가장 최근에 전송한 라우터는 이 사실을 인지하여 재전송을 수행할 능력이 없으며, 결국 데이터 손실을 인지하게 되었다면 송신자 측 단말기가 패킷을 처음부터 다시 전송해야 한다.)


### 2. 프로토콜

\- 프로토콜은 네트워크의 두 당사자가 서로 소통할 때 어떤 형식적 절차를 따라 통신을 할 것인지를 정하는 일종의 약속이다. (예를 들어, 사람 간에 대화를 할 때에도 바로 본론으로 들어가지 않고 그에 앞서 서로 최근의 근황과 안부를 간단히 묻는 정도의 암묵적 절차가 있다. 네트워크 통신 또한 이와 같이 약속된 방식을 따라 통신이 이루어지게 된다.) 

\- 각 OSI 계층마다 널리 쓰이는 프로토콜들이 있으며, application 계층에서는 HTTP, transport 계층에서는 TCP, UDP, network 계층에서는 IP, link 계층에서는 Wi-Fi, LTE, Ethernet 등이 있다. 각 계층의 프로토콜은 그 계층에서 요구되는 목적을 충족하는 기능만을 제공하며, 상위 계층에서는 하위 계층의 프로토콜이 지원하는 기능을 이용하여 자신의 계층에서 필요한 작업을 처리해 그 결과를 보다 상위 계층으로 넘기게 된다. 예를 들어, transport 계층의 UDP는 유실될 수 있는 정보 전달 프로토콜이지만, 그보다 상위 계층인 application 계층에서 추가적 기능 구현을 통해 정보 전달의 손실이 일어나지 않게 할 수도 있다.

- TCP: (1)전송에 있어 데이터 손실이 없고 (2)송신한 순서대로 데이터가 수신되며 (3)송신 시 수신하는 측이 받아들일 수 있는 속도에 맞춰 송신을 하고(flow control) (4)양 당사자 사이 네트워크 상태에 맞춰 데이터를 송신한다(congestion control). 데이터 손실이 있어서는 안되는 분야에서 널리 쓰이는 프로토콜이다.

- UDP: 모든 측면에서 TCP의 반대라 할 수 있는 프로토콜이다. 즉, (1)송신된 데이터는 유실될 수 있으며 (2)수신되는 데이터의 순서는 송신 순서와 무관하고 (3)수신 측이 받아들일 수 있는 속도를 굳이 고려하지 않고 송신하며 (4)양 당사자 사이 네트워크 상태도 굳이 고려하지 않는다. 어느 정도 데이터 손실이 있더라도 통신에 있어 큰 단점을 갖지는 않는 분야(예를 들면, 실시간 음성대화 등)에서 쓰이기도 하는 프로토콜이다.


### 3. 데이터 전송 방식

#### 1) circuit switching

\- **송신측과 수신측 사이 경로를 미리 정해두고 특정된 양 당사자만이 그 경로를 사용**하게 하는 데이터 전송 방식을 말한다. 경로가 설정되면 설정된 동안은 지속적인 통신이 이루어지며 다른 사용자가 그 경로에 할당된 범위를 빼앗아 통신을 할 수 없다. (예를 들어, 어떤 라우터가 최대 1Mbps로 데이터를 전송할 수 있고 100Kbps로 통신하는 사용자들이 그 라우터를 circuit switching 방식으로 이용한다면 최대 10명의 사용자만이 동시에 그 라우터를 사용할 수 있다.) 과거 유선 전화의 데이터 전송 방식은 circuit switching을 사용하였다.


#### 2) packet switching

\- 전송할 데이터를 '패킷'이라는 데이터 단위로 나누어 **매번 한 단위씩 데이터를 전송**하는 방식. 끊임없이 실시간으로 통신이 이루어져야 하는 상황이 아닐 때 사용할 수 있는 방식으로, 실시간으로 통신이 이루어지는 게 아니므로 경로 하나를 사용할 수 있는 사용자의 수에는 제한이 없다. 현재 인터넷 네트워크는 packet switching 방식을 사용한다.

\- packet switching 방식은 다음 이유로 딜레이가 발생하는 경우가 있다.

- processing delay: 패킷에 에러는 없는지, 이 패킷이 어디로 전송되는지 등을 연산하는 데 시간이 다소 걸릴 수 있다. 라우터의 CPU 성능을 개선하여 딜레이를 줄일 수 있다.

- queueing delay: 라우터에서 패킷을 내보내는 속도보다 라우터로 패킷이 들어오는 속도가 빠르면 라우터로 들어온 패킷은 먼저 들어온 패킷이 라우터에서 내보내질 때까지 버퍼에 대기해야 한다. 이 딜레이의 원인은 결국 '이 라우터로 너무 많은 패킷이 들어온다'이므로, 특정 라우터로 너무 많은 패킷이 집중되지 않도록 하는 것 외에는 달리 개선할 방법이 없다. 현재 네트워크에서 발생하는 패킷 손실의 90% 이상이 queueing delay로 인한 패킷 손실이다.

- trasmission delay: 라우터에서 지금 당장 내보낼 패킷을 첫 비트부터 마지막 비트까지 모두 내보내는 데 걸리는 시간이 너무 느리면 발생하는 딜레이. 전송하는 통로(bandwidth)를 키우면 딜레이를 해소할 수 있다. 한편, 라우터에서 패킷의 첫 비트가 내보내졌을 때 다음 비트가 내보내지기 전에 **첫 비트가 먼저 다음 라우터로 전송되는 것이 아니라**, 모든 비트가 다 내보내진 뒤에 **이들이 한꺼번에 다음 라우터로 전송**된다는 사실을 알아야 한다.

- propagation delay: 라우터에서 전송된 데이터가 다음 라우터까지 도착하는 데 걸리는 시간. 라우터와 라우터 사이를 이동하는 데이터의 이동 속도는 빛의 속도이므로, 결국 이 딜레이는 라우터와 라우터 사이 거리에 비례한다. 


\* 이 자료는 <http://www.kocw.net/home/cview.do?cid=6166c077e545b736> 이 링크의 강의 내용을 정리한 자료입니다.