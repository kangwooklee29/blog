---
title: DNS
---


### 1. 개요

\- 인터넷 상의 모든 서버는 IP 주소를 통해 인터넷에 연결돼 있으므로 어떤 서버에 데이터를 요청하려면 그 서버의 IP 주소를 입력해 이를 요청해야겠지만, 실제 일반 사용자 입장에서 자신이 데이터를 요청하고자 하는 서버의 12자리 숫자로 된 IP 주소를 일일이 입력해 데이터를 요청하는 건 현실적으로 난이도가 너무 높다. 이 점을 고려하여 실제 인터넷 서비스는 알파벳과 숫자로 이루어진 식별자인 도메인 네임(domain name)을 입력하는 것만으로 각 서버에 접속할 수 있게 하며, 이처럼 도메인 네임을 이용해 각 서버에 접속할 수 있게 하는 인터넷 서비스 내 체계를 DNS(domain name system)라 한다.

\- 구체적으로, 일반 사용자가 브라우저 창 등을 통해 인터넷 서버의 도메인 주소를 입력하면, (1)먼저 사용자가 속한 DHCP 서버가 그 요청을 전달받아 자신에게서 가장 가까운 DNS 서버의 IP 주소를 반환하고 (2)사용자의 요청은 다시 그 DNS 서버로 전달되며 이때 그 DNS 서버는 그 도메인 주소에 대응되는 그 인터넷 서버의 IP 주소를 반환한다. (3)그 다음에 비로소 그 IP 주소로 그 사용자의 데이터 요청이 전달된다.


### 2. DNS 서버

\- 기능만 생각하면 DNS 서버는 인터넷 내에 단 하나만 있어도 될 것 같지만, 실제로 인터넷 망에 연결돼 있어 DNS 서버로 IP 주소를 요청하는 호스트는 수십억 대가 있고 이러한 요청을 컴퓨터 한 대로 처리하는 것은 물리적으로 불가능하다. 설사 가능하다 하더라도, 그 컴퓨터가 고장나면 그 순간 전세계의 인터넷 망이 동시에 다운되는 거나 다름없어 바람직하지 못하다. 이 때문에 DNS 서버는 전세계 곳곳에 수만 대 이상 배치돼 있으며, DNS 서버끼리도 서로 계층 구조를 이루고 있어 IP 주소 요청을 보다 효율적으로 처리하고 있다.

#### 1) 로컬 DNS 서버

\- 각 인터넷 사용자가 속한 서브넷의 DHCP 서버마다 그 DHCP에서 가장 가까운 DNS 서버의 IP 주소가 저장돼 있으며, 이를 로컬 DNS 서버라 한다. 

\- 로컬 DNS 서버는 사용자가 요청하는 인터넷 서버의 도메인 네임을 전달받았을 때 그에 대응되는 IP 주소가 서버에 있으면 이를 반환하고(DNS caching), 없으면 도메인 네임을 루트 DNS 서버에 전달함으로써 IP 주소를 얻어오는 일련의 절차를 개시한다. 절차가 종료되면 얻어온 IP 주소를 이를 요청한 사용자에게 반환한다.


#### 2) 루트 DNS 서버

\- 도메인 주소에 대응되는 IP 주소를 찾는 일종의 기점이 되는 DNS 서버로, 로컬 DNS 서버로부터 전달받은 도메인 네임에서 최상위 레벨 도메인(top-level domain, TLD)을 분석해 그에 대응되는 TLD DNS 서버의 IP 주소를 로컬 DNS 서버에 반환한다.

  - FQDN(fully qualified domain name): 하나의 도메인 네임의 전체적 형태를 FQDN이라 하며, FQDN은 마침표를 기준으로 여러 구성요소를 갖는다. 
  
  - TDL: FQDN에서 가장 마지막 마침표 뒤에 있는 구성요소를 TLD라 하며, 이 값은 인터넷 서버측이 임의로 결정하는데 대개 그 인터넷 서버가 제공하는 서비스의 성격에 따라 결정된다. `com`, `org`, `net` 같은 경우가 흔하며, `kr`, `jp` 같이 표준으로 지정된 국가코드가 배치되는 경우도 있다. 각 값에 따라 그에 대응되는 TLD DNS 서버가 전세계 곳곳에 있다.

  - 2단계 도메인(second-level domain, SLD): FQDN에서 뒤에서 두 번째 구성요소(만약 마지막 구성요소가 국가코드고 뒤에서 두 번째 구성요소가 국가코드 2단계 도메인이라면, 뒤에서 세 번째 구성요소)를 일컫는 표현으로, 이 역시 인터넷 서버측이 임의로 결정하며 인터넷 서버를 식별하는 주된 도메인 네임이라 할 수 있다. 전세계의 각 TLD DNS 서버에는 각 SLD 값에 따라 그에 대응되는 인터넷 서버의 IP 주소가 저장돼 있다. 일반 사용자는 도메인 등록 전문 대행 업체를 통해 TLD DNS 서버에 자신이 원하는 값을 지정해 자신의 인터넷 서버의 IP 주소를 등록할 수 있다.

  - 서브도메인(subdomain): FQDN의 첫 번째 구성요소. 각 인터넷 서버는 여러 호스트를 묶어 인터넷 서비스를 할 수 있고, 이때 서브도메인은 그 인터넷 서버로 전달된 요청 중 어떤 호스트로 요청을 전달할지를 지정하는 역할을 한다. HTTP/HTTPS 프로토콜을 통해 웹페이지를 요청하고 그에 따라 웹페이지를 반환하는 서브도메인으로서 `www`가 가장 대중적으로 쓰이지만 이는 의무 사항은 아니며 각 인터넷 서버가 얼마든지 임의로 결정할 수 있다.

\- 루트 DNS 서버의 IP 주소는 전세계에 단 13개밖에 없는데, 이는 DNS 프로토콜이 과거 UDP 프로토콜로만 통신을 수행했다는 점과 관련이 있다. (DNS 통신의 경우 일반적으로 통신할 때 전달하는 메시지의 크기가 워낙 작고 TCP 프로토콜이 사용하는 3-way handshaking의 overhead가 커서 현재도 웬만해선 UDP 프로토콜로 통신을 수행한다.) 패킷의 크기가 클수록 데이터 손실 위험이 커지므로 UDP 프로토콜의 경우 패킷 하나의 크기를 512 바이트로 제한하는데, 루트 DNS 서버의 IP 주소 목록을 512 바이트 이내로 담았을 때 담을 수 있는 IP 주소의 최대 개수가 13개이기 때문에 처음부터 루트 DNS 서버의 IP 개수가 총 13개로 고정된 것이다. 다만 각 IP 주소에 대응되는 실제 물리적 루트 DNS 서버 수는 그것보다 많기 때문에 전세계에 있는 물리적 루트 DNS 서버는 1천개 이상 존재한다.


#### 3) TLD DNS 서버

\- 