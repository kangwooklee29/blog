### 1. Apache HTTP Server

\- 초기 WWW 역사에서 널리 쓰인 웹서버 프로그램으로 일리노이 대학교의 국립 슈퍼컴퓨팅 응용 센터(NCSA)에서 개발한 NCSA HTTPd가 있는데, 이 프로그램은 소스코드가 공개되어 누구나 무료로 사용할 수 있는 프로그램이었다. 그러나 1994년 이 프로젝트가 중단되자 이 프로젝트가 지속되어야 한다고 생각한 개발자들 중 몇몇이 모여 1995년 2월 NCSA HTTPd의 코드에 기반한 새 웹서버 프로그램을 개발하기 시작했다. 이들은 아메리카 원주민인 아파치족의 이름을 따 자신들을 아파치 그룹(Apache group)이라 칭했으며, 자신들의 웹서버 프로그램을 아파치 HTTP 서버라 이름지었다. 아파치 HTTP 서버는 이후 계속 개발되어 현재도 세계적으로 널리 쓰이는 웹서버 프로그램이며, 이 아파치 그룹은 1999년 아파치 소프트웨어 재단으로 발전해 현재도 여러 오픈소스 프로젝트를 운영하고 있다.

\- 아파티 HTTP 서버는 확장성이 뛰어나고 사용자 커뮤니티가 강력하다는 등 많은 장점이 있지만, 동시에 접속하는 클라이언트 수가 크게 증가했을 때 이를 처리하는 성능이 매우 떨어진다는 점(C10k problem) 때문에 대규모 트래픽을 처리하는 웹서버의 경우 다른 웹서버 프로그램을 사용한다.

- 아파치 HTTP 서버는 새 클라이언트와 연결을 형성할 때마다 매번 새 스레드를 생성하는 방식으로 클라이언트와의 연결을 관리한다(process-driven). 그런데 이와 같은 관리 방식은 클라이언트 관련 I/O를 할 때(버퍼에서 데이터를 받아오거나 보낼 때) 스레드 전체가 blocked 상태로 전환돼야 하고, 이 경우 그 스레드가 그 연결에 관한 처리를 할 수 없고 대기 상태에 오래 머무르게 된다. 프로세스/스레드가 아주 많지는 않다면 대기 상태에 머무르는 시간이 아주 길지는 않을 수 있으나 클라이언트 연결 수가 많아진다면 CPU는 여유가 있는데 I/O로 인해 스레드 전체가 blocked 상태에 머무르는 경우가 크게 늘어나게 된다. 이것이 아파치 HTTP 서버가 갖는 C10k 문제의 구조적인 원리이다.

- 특히 아파치 HTTP 서버는 HTTP/1.1부터 기본 설정이 된 HTTP Keep-Alive에 관한 문제가 있는데, Keep-Alive는 TCP 통신이 끝난 후 바로 TCP 연결을 끊지 않고 일정 시간 대기하는 상태로 이 상태가 기본 설정이 돼 종전보다 추가로 스레드가 blocked 상태에 머무르는 시간이 길어졌다는 점이다. 이 문제를 해소하기 위해 아파치 HTTP 서버는 클라이언트 연결을 스레드를 통해 관리하는 새로운 방식을 사용했으나(클라이언트로부터 데이터를 전달받는 작업만을 처리하는 스레드를 별개로 두어 그 스레드가 TCP 연결을 형성하는 작업을 전담으로 처리하도록 하고, TCP 연결이 생성되면 그때 그 연결에 대한 작업을 수행하는 스레드로 TCP 연결을 넘기는 구조로, 이를 event MPM라 한다) 이 역시 C10k 문제를 해결하는 데는 한계가 있다.



### 2. NGINX

#### 1) 개요

\- 2004년 러시아의 프로그래머 이고르 시쇼브가 C10k 문제를 겪는 아파치 HTTP 서버의 대안으로 발표한 오픈소스 웹서버 프로그램으로, 서버-클라이언트 연결을 관리하는 구조가 아파치 HTTP 서버와는 전혀 다르다. 굉장히 가볍고 뛰어난 성능으로 C10k 문제가 없어 현재 아파치 HTTP 서버 못잖은 수준으로 큰 인기를 누리고 있다.

\- 


#### 2) 작동 원리

\- 