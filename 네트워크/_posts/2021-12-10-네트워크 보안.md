### 1. 네트워크 보안 4대 요소

- confidentiality: 센더와 리시버 사이 통신 내용을 제3자가 보고 알 수 없어야 한다. (센더는 메시지를 암호화 해서 전송하고, 리시버는 이를 해독하여 메시지를 수신한다.)

- authentication: 센더와 리시버는 서로가 상대라는 것을 인증할 수 있어야 한다.

- message integrity: 센더와 리시버는 전송된 메시지가 도중에 변경되지 않음을 확신할 수 있어야 한다.

- access and availability: 제3자의 공격 등으로 네트워크 통신이 중단되지 않고 센더와 리시버는 언제든지 통신할 수 있어야 한다.

\- 현재 인터넷의 프로토콜 체계인 TCP/IP를 만들 당시에는 네트워크 보안 위험이 고려되지 않았기 때문에 위와 같은 요소들이 구현되지 않았고, 현재까지 관련 이슈가 나타날 때마다 그때그때 패치를 하는 식으로 문제를 해결해오고 있다. 


### 2. confidentiality

#### 1) symmetric key cryptography

\- 어떤 메시지를 암호화를 할 수 있고 또 그 암호화된 메시지를 해독할 수 있는 키가 미리 정해져 있을 때, 그 키를 알고 있는 센더는 그 암호화 키로 메시지를 암호화 해 전송하고 또 그 키를 알고 있는 리시버는 그 암호화 키로 메시지를 해독해 그 내용을 얻는 방식을 말한다. AES, DES 등이 이러한 방식에 해당한다.

\- 이 방식으로 암호화 통신을 하려면 사전에 센더와 리시버가 미리 암호화 키를 합의해야 한다. TCP connection이 구축된 다음에 센더가 키를 리시버에게 암호화하지 않고 전송한다면 그 키가 제3자에게 유출될 위험이 있으므로 일반적인 인터넷 환경에서는 단순히 이 방법만 써서는 암호화 통신이 보장이 안 된다.


#### 2) public key cryptography

\- 어떤 메시지를 암호화하는 키는 공공연히 알려져 있되(public key) 그 키로 암호화된 메시지를 해독할 수 있는 키는 오직 리시버만 갖고 있어(private key) 센더는 그 public key로 메시지를 암호화 해 전송하고 리시버는 자신의 private key로 메시지를 해독해 그 내용을 얻는 방식을 말한다. RSA 등이 이러한 방식에 해당한다.

\- 이 방식은 메시지를 암호화하고 해독하는 데 symmetric key 방식보다 훨씬 더 많은 자원을 사용하므로, 센더-리시버 사이 오가는 모든 메시지를 이 방식으로 암호화하고 해독한다면 네트워크 통신 효율이 많이 떨어지게 된다. 일반적인 인터넷 환경에서는 보통 symmetric key 방식으로 암호화 통신을 하되, symmetric key 방식에서 사용할 암호화 키를 public key 방식으로 리시버에게 전송하는 방식을 사용한다. (SSL/TLS 등이 이러한 방식에 해당한다.)


### 3. authentication

\- 예를 들어 Alice라는 호스트가 Bob이라는 호스트에게 자신이 Alice임을 인증받고 통신을 하고 싶다 할 때, Alice가 단순히 메시지에 자신의 IP 주소와 함께 '내가 Alice다'라는 주장만을 담아 전송하는 것으로는 Bob이 그 센더가 진짜 Alice인지를 알 수 없다. 일반적인 TCP/IP 환경에서는 제3자가 패킷에 임의로 ALice의 IP 주소를 넣고 '내가 Alice'라는 메시지를 담아 전송하는 게 가능하기 때문이다. 

\- Bob이 센더가 Alice임을 확인하기 위하여 다음과 같은 방법을 사용한다.

1) Bob은 **무작위로 숫자를 하나 골라 전송**한다.

2) Alice는 Bob이 전송한 숫자를 자신이 갖고 있는 암호키로 암호화해 그 값을 리턴한다.

3) Bob은 Alice가 리턴한 값을 해독한다. 그 값이 Bob이 전송했던 숫자와 같다면 센더가 갖고 있는 암호키가 Alice의 암호키가 맞다는 뜻이므로 이로써 센더가 Alice임이 증명된다.


### 4. message integrity

\- 상기한 방식을 사용하면 리시버가 수신한 메시지가 센더가 보낸 메시지가 맞고 그 내용도 중간에 제3자의 공격 등으로 변경되지 않았음이 보장되나, 센더가 매번 메시지 전문을 위 방식으로 암호화해 전송한다면 소모되는 자원이 매우 커지게 된다. 일반적으로는 보낼 메시지와 함께 그 메시지에 대하여 MD5, SHA 등의 해시함수를 사용한 해시값을 public key cryptography 방식으로 암호화해 이 값을 전송한다. 리시버는 수신되는 메시지를 센더가 사용했을 해시함수를 사용하여 해시값을 구해보고 그것이 센더가 보낸 해시값과 일치하는지 여부를 검사하여 message integrity 보장 여부를 알 수 있다. (이처럼 메시지를 해시함수로 처리한 해시값을 암호화하는 방식을 message digest라 한다.) 