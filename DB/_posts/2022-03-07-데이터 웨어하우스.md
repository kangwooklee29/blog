### 1. 개요

\- DBMS 중에 기업의 통상 업무 때의 DB에 저장된 데이터 사용을 지원하는 DBMS(프로덕션 DB)가 있는 반면 대량의 데이터를 담아 두었다가 이를 활용하여 데이터 분석 등을 수행하기 위해 사용되는 DBMS(데이터 웨어하우스)가 있다. 어떤 기업이 통상적인 업무에서 사용하는 데이터는 보통 프로덕션 DB에 담겨있는데, 통상적인 업무가 아니라 기업의 차후 의사결정을 위하여 데이터 분석을 수행하기 위하여 기업이 축적한 데이터를 가져와 연구를 할 때 매번 프로덕션 DB에 접근해 데이터를 가져오게 하면 이러한 DB 접근이 프로덕션 DB의 성능 전체에 영향을 줄 수 있다. 프로덕션 DB는 보통 데이터 분석에서 하는 것과 같이 대량의 데이터를 한꺼번에 가져오는 등의 작업을 수행하기에는 적합하지 않기 때문이다. 따라서 데이터 분석을 중요시하는 기업에서는 프로덕션 DB의 내용을 그대로 가져오되 이를 대량의 데이터를 다루는 데 더 적합한 데이터 웨어하우스에 담아 데이터 분석 업무를 하게 한다. 

- 이때 프로덕션 DB의 내용을 데이터 웨어하우스로 그대로 가져오는 과정을 data pipeline 또는 ETL(extract, transform, load)이라 한다. ETL과 데이터 웨어하우스, 그리고 여기에 더해 Spark, Hadoop 같이 데이터 웨어하우스를 지원하는 분산 컴퓨팅 환경까지 모두 포함하여 데이터 인프라라 한다.

\- 오라클, MySQL 등이 프로덕션 DB라면 Redshift, Snowflake, BigQuery, Hive 등이 데이터 웨어하우스에 해당한다.

### 2. 데이터 웨어하우스와 SQL

\- 00년대 중반 빅데이터와 Hadoop의 시대가 오면서 잠시 'SQL은 소형 데이터를 다루기에만 적합하고 빅데이터에는 적합하지 않다'라는 인식이 생겼었으나, 얼마 지나지 않아 빅데이터를 다루는 데에도 SQL이 유용하다는 인식이 생기면서 현재 널리 쓰이는 데이터 웨어하우스들 다수가 SQL을 지원한다. 

\- SQL은 구조화된 데이터를 다루는 데는 유용하나 구조화되지 않은 데이터를 다루는 건 어렵다는 점, JSON처럼 field 안에 field가 들어가는 형태가 불가능하고 flat한 데이터 구조만 갖는다는 점 등의 단점이 있어 구조화되지 않고 복잡도가 높은 대량의 데이터를 다루는 데 어려운 점이 있다. 이 경우 Spark, Hadoop과 같이 데이터 웨어하우스를 지원하는 분산 컴퓨팅 환경을 사용하면 이러한 단점을 완화할 수 있다.


### 3. 데이터 웨어하우스의 schema

\- 프로덕션 DB의 경우 하나의 DB에 여러 테이블이 있어 데이터 하나를 여러 스키마로 나누어 각 테이블에 저장한다(star schema). 이 경우 서로 다른 데이터끼리 중복되는 부분에 대해서만큼은 저장공간을 할당하지 않아 이를 아낄 수 있지만, 대신 데이터 하나의 완전한 전체 내용을 가져오려면 여러 테이블끼리 join 연산을 수행해야 한다. 따라서 프로덕션 DB의 경우 대량의 데이터를 한꺼번에 가져오려면 연산량이 그만큼 매우 크게 증가하는 경향이 있다. 반면 데이터 웨어하우스는 서로 다른 데이터끼리 중복되는 부분이 있어도 여러 스키마로 나누지 않고 하나의 테이블에 통째로 저장한다(denormalized schema). 이 경우 그만큼 저장공간에 중복되는 내용이 많이 늘어나게 돼 어느 정도 저장공간 낭비가 발생하지만, 대신 데이터 하나의 전체 내용을 가져올 때 join 연산을 하지 않으므로 대량의 데이터를 한꺼번에 가져올 때 그만큼 시간적인 이익이 있다.
